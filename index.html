<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>샘플 테스트</title>
    <script>
      // localStorage 접근 에러를 완전히 억제 (스크립트 로드 전에 실행)
      (function() {
        'use strict';
        
        // window.onerror로 동기 에러 처리
        const originalOnError = window.onerror;
        window.onerror = function(message, source, lineno, colno, error) {
          if (message && typeof message === 'string' && (
            message.includes('storage is not allowed') ||
            message.includes('Access to storage') ||
            message.includes('localStorage') ||
            message.includes('Storage') ||
            message.toLowerCase().includes('storage')
          )) {
            return true; // 에러 무시
          }
          if (originalOnError) {
            return originalOnError.call(this, message, source, lineno, colno, error);
          }
          return false;
        };
        
        // error 이벤트 리스너로 에러 처리
        window.addEventListener('error', function(event) {
          if (event.message && (
            event.message.includes('storage is not allowed') ||
            event.message.includes('Access to storage') ||
            event.message.includes('localStorage') ||
            event.message.includes('Storage') ||
            event.message.toLowerCase().includes('storage')
          )) {
            event.preventDefault();
            event.stopPropagation();
            event.stopImmediatePropagation();
            return false;
          }
        }, true);
        
        // Promise rejection 처리
        window.addEventListener('unhandledrejection', function(event) {
          const reason = event.reason;
          if (reason) {
            const errorMessage = reason.message || reason.toString() || '';
            if (
              errorMessage.includes('storage is not allowed') ||
              errorMessage.includes('Access to storage') ||
              errorMessage.includes('localStorage') ||
              errorMessage.includes('Storage') ||
              errorMessage.toLowerCase().includes('storage')
            ) {
              event.preventDefault();
              event.stopPropagation();
              event.stopImmediatePropagation();
              return false;
            }
          }
        }, true);
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>





